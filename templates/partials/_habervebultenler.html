{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/base_css/_habervebultenler.css' %}">
{% endblock %}

{% block content %}

<section class="haber-wrapper  anim-sag">
  <div class="container-fluid p-0">
      <div class="row justify-content-center offset-md-1 col-md-10 mx-auto haber-icerik-orta-alan">
    

        <div class="row align-items-center logo-baslik-slogan">
          <div class="col-12 col-md-6 d-flex logo-padding-sifirla align-items-center anim-giris anim-sol">
            <div class="logo-container">
              <img src="{% static 'img/grilogo.png' %}" alt="Logo" class="logo-img">
            </div>
            <span class="logo-title">HABERLER VE BÜLTENLER</span>
          </div>
          <div class="col-12 col-md-6 anim-giris haber-slogan anim-sag">
            <p class="slogan-text">
              Akliva’nın son güncellemelerini, duyurularını ve sektör haberlerini takip edin. Bültenlerimiz, devam eden projeler ve şirket gelişmeleri hakkında size bilgiler sunar.
            </p>
          </div>
        </div>

        <div class="row mt-4 sol-dis-bosluk px-0">
          <div class="col-12 col-md-8 col-lg-8 mx-0 px-0">
            <div class="haber-baslik-wrapper d-md-block mb-3"> <p class="section-heading">HABERLER</p>
            </div>

            <div class="haber-slider-container">
              {% for haber in haberler %}
                <div class="haber-card">
                  <img src="{% static 'img/' %}{{ haber.resim }}" class="haber-resim" alt="Haber görseli">
                  <div class="d-flex align-items-center gap-2 mb-2">
                    <img src="{% static 'img/konum1.png' %}" class="konum-icon" alt="Konum">
                    <span class="konum-text">{{ haber.konum }}</span>
                    <img src="{% static 'img/takvim-ikonu1.png' %}" class="takvim-icon" alt="Tarih">
                    <span class="konum-text">20.15.2025</span>
                  </div>
                  <h3 class="haber-baslik">{{ haber.baslik }}</h3>
                  <p class="haber-icerik">{{ haber.icerik }}</p>
                  <div class="haber-button-wrapper">
                  <button class="haber-button">DETAYLI İNCELE</button>
                </div>
                </div>
              {% endfor %}
            </div>

            <div class="row mt-4">
              <div class="col-12 d-flex align-items-center justify-content-between">
                <div class="haber-progres flex-grow-1 me-3">
                  <div class="haber-progres-inner"></div>
                </div>
                <div class="haber-slider-buttons d-flex gap-2">

                    <svg id="haber_sliderPrev" class="slider-arrow" width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path  class="arrow-shape" d="M20.8077 11.0762C20.492 11.0762 20.1892 11.2022 19.966 11.4265L14.0386 17.3832C13.9275 17.4939 13.8393 17.6257 13.7792 17.7708C13.719 17.916 13.688 18.0717 13.688 18.229C13.688 18.3863 13.719 18.542 13.7792 18.6872C13.8393 18.8323 13.9275 18.9641 14.0386 19.0748L19.966 25.0315C20.0762 25.1431 20.2073 25.2318 20.3518 25.2922C20.4962 25.3527 20.6512 25.3839 20.8077 25.3839C20.9642 25.3839 21.1191 25.3527 21.2636 25.2922C21.408 25.2318 21.5391 25.1431 21.6493 25.0315C21.7605 24.9207 21.8486 24.789 21.9088 24.6438C21.969 24.4986 22 24.3429 22 24.1856C22 24.0284 21.969 23.8726 21.9088 23.7275C21.8486 23.5823 21.7605 23.4505 21.6493 23.3398L16.5518 18.229L21.6493 13.1182C21.8726 12.8939 21.998 12.5896 21.998 12.2724C21.998 11.9551 21.8726 11.6509 21.6493 11.4265C21.4261 11.2022 21.1234 11.0762 20.8077 11.0762Z" fill="currentColor"/>
                    <circle cx="18" cy="18" r="17" transform="matrix(-1 0 0 1 36 0)" stroke="#B1B1B1" stroke-width="2"/>
                  </svg>

                  <svg id="haber_sliderNext" class="slider-arrow" width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g transform="scale(-1,1) translate(-36,0)">
                    <path  class="arrow-shape" d="M20.8077 11.0762C20.492 11.0762 20.1892 11.2022 19.966 11.4265L14.0386 17.3832C13.9275 17.4939 13.8393 17.6257 13.7792 17.7708C13.719 17.916 13.688 18.0717 13.688 18.229C13.688 18.3863 13.719 18.542 13.7792 18.6872C13.8393 18.8323 13.9275 18.9641 14.0386 19.0748L19.966 25.0315C20.0762 25.1431 20.2073 25.2318 20.3518 25.2922C20.4962 25.3527 20.6512 25.3839 20.8077 25.3839C20.9642 25.3839 21.1191 25.3527 21.2636 25.2922C21.408 25.2318 21.5391 25.1431 21.6493 25.0315C21.7605 24.9207 21.8486 24.789 21.9088 24.6438C21.969 24.4986 22 24.3429 22 24.1856C22 24.0284 21.969 23.8726 21.9088 23.7275C21.8486 23.5823 21.7605 23.4505 21.6493 23.3398L16.5518 18.229L21.6493 13.1182C21.8726 12.8939 21.998 12.5896 21.998 12.2724C21.998 11.9551 21.8726 11.6509 21.6493 11.4265C21.4261 11.2022 21.1234 11.0762 20.8077 11.0762Z" fill="currentColor"/>
                    <circle cx="18" cy="18" r="17" stroke="#B1B1B1" stroke-width="2"/>
                    </g>
                  </svg>

                {% comment %}   <img src="{% static 'img/sliderSol.png'%}" id="haber_sliderPrev" class="slider-arrow" alt="Sol">
                  <img src="{% static 'img/sliderSag.png'%}" id="haber_sliderNext" class="slider-arrow" alt="Sağ"> {% endcomment %}
                
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-4 col-lg-4 mx-0 px-md-3 px-lg-4">
            <div class="bulten-baslik-wrapper d-md-block mb-3 mt-4 mt-md-0"> 
              <p class="section-heading">BÜLTENLER</p>
            </div>
            
            <div class="bulten-card anim-giris anim-sol">
              <div class="bulten-meta">
                <img src="{% static 'img/konum1.svg' %}" class="konum-icon" alt="Konum">
                <span class="konum-text">İstanbul</span>
                <img src="{% static 'img/takvim-ikonu1.svg' %}" class="takvim-icon" alt="Tarih">
                <span class="konum-text">20.15.2025</span>
              </div>
              <h3 class="bulten-baslik">Beyza Sitesi Projesi Konya Selçuklu'da Tamamlanıyor!</h3>
              <button class="bulten-button">DETAYLI İNCELE</button>
            </div>

            <div class="bulten-card anim-giris anim-sag">
              <div class="bulten-meta">
                <img src="{% static 'img/konum1.svg' %}" class="konum-icon" alt="Konum">
                <span class="konum-text">Ankara</span>
                <img src="{% static 'img/takvim-ikonu1.svg' %}" class="takvim-icon" alt="Tarih">
                <span class="konum-text">21.10.2025</span>
              </div>
              <h3 class="bulten-baslik">Bülten Başlığı 2</h3>
              <button class="bulten-button">DETAYLI İNCELE</button>
            </div>
          </div>
        </div>

      </div>

    

  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function () {
  const sliderContainer = document.querySelector(".haber-slider-container");
  const cards = document.querySelectorAll(".haber-card");
  const prevBtn = document.getElementById("haber_sliderPrev");
  const nextBtn = document.getElementById("haber_sliderNext");
  const progressBar = document.querySelector(".haber-progres-inner");
  
  const gap = 21;
  const cardWidth = window.innerWidth >= 1024
  ? cards[0].offsetWidth + gap
  : cards[0].offsetWidth;

  const totalCards = cards.length;
  const visibleCards = window.innerWidth >= 1024 ? 2 : 1;
  let currentIndex = 0;

function updateScroll() {
  const isMobile = window.innerWidth < 1024;
  const gap = 21;
  const cardWidth = cards[0].offsetWidth;
  const visibleCards = isMobile ? 1 : 2;
  const maxIndex = totalCards - visibleCards;

  let scrollX;

  if (isMobile) {
    const containerOffset = sliderContainer.getBoundingClientRect().left;
    const cardOffset = cards[currentIndex].getBoundingClientRect().left;
    const currentScroll = sliderContainer.scrollLeft;
    scrollX = currentScroll + cardOffset - containerOffset;
  } else {
    scrollX = currentIndex * (cardWidth + gap);
  }

  sliderContainer.scrollTo({ left: scrollX, behavior: "smooth" });

  const progressPercent = Math.min((currentIndex / maxIndex) * 100, 100);
  progressBar.style.width = progressPercent + "%";
}

  nextBtn.addEventListener("click", () => {
    const maxIndex = totalCards - visibleCards;
    if (currentIndex < maxIndex) {
      currentIndex++;
      updateScroll();
    }
  });

  prevBtn.addEventListener("click", () => {
    if (currentIndex > 0) {
      currentIndex--;
      updateScroll();
    }
  });

  updateScroll();
  window.addEventListener("resize", () => {
  updateScroll();
});
});
</script>
{% endblock %}
